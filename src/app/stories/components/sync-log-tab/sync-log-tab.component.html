<ion-toolbar >
  <ion-buttons slot="end">
    <ion-chip color="medium">
      <ion-label>{{ logs.length }} Logs</ion-label>
    </ion-chip>
    <ion-button color="danger" (click)="clearLogs()" [disabled]="logs.length === 0">
      <ion-icon name="trash" slot="icon-only"></ion-icon>
    </ion-button>
  </ion-buttons>
</ion-toolbar>

<ion-list class="logs-list">
  <ion-card *ngFor="let log of logs" 
            [class.success-card]="log.status === 'success'"
            [class.error-card]="log.status === 'error'"
            [class.warning-card]="log.status === 'warning'"
            [class.info-card]="log.status === 'info'">
    
    <ion-item button detail="false" (click)="toggleExpand(log.id)" class="log-header">
      <ion-icon 
        [name]="getTypeIcon(log.type)" 
        [color]="getStatusColor(log.status)"
        slot="start"
        class="status-icon">
      </ion-icon>
      
      <ion-label>
        <h2>
          <ion-text>{{ log.action }}</ion-text>
        </h2>
        <p>
          <ion-text color="medium">{{ formatTime(log.timestamp) }}</ion-text>
        </p>
        <p>
          <ion-chip color="medium" class="meta-chip" *ngIf="log.userId">
            <ion-icon name="person-outline"></ion-icon>
            <ion-label>{{ log.userId }}</ion-label>
          </ion-chip>
          <ion-chip color="medium" class="meta-chip" *ngIf="log.itemCount !== undefined">
            <ion-icon name="sync-outline"></ion-icon>
            <ion-label>{{ log.itemCount }} Elemente</ion-label>
          </ion-chip>
          <ion-chip color="medium" class="meta-chip" *ngIf="log.duration">
            <ion-icon name="time-outline"></ion-icon>
            <ion-label>{{ log.duration }}ms</ion-label>
          </ion-chip>
        </p>
      </ion-label>
      
      <ion-icon 
        [name]="expandedLogs.has(log.id) ? 'chevron-down' : 'chevron-forward'"
        slot="end"
        *ngIf="log.details">
      </ion-icon>
    </ion-item>
    
    <ion-card-content *ngIf="expandedLogs.has(log.id) && log.details" class="log-details">
      <div class="detail-section">
        <ion-text [color]="log.status === 'error' ? 'danger' : 'medium'">
          <h3>Details:</h3>
        </ion-text>
        <pre class="content-pre" [class.error-content]="log.status === 'error'">{{ log.details }}</pre>
      </div>
    </ion-card-content>
  </ion-card>
  
  <ion-card *ngIf="logs.length === 0" class="no-logs-card">
    <ion-card-content class="ion-text-center">
      <ion-text color="medium">
        <p>Noch keine Synchronisations-Logs vorhanden.</p>
      </ion-text>
    </ion-card-content>
  </ion-card>
</ion-list>