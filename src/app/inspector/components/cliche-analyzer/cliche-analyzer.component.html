<div class="ion-page">
  <app-header
    [title]="'Story Inspector'"
    [showBackButton]="true"
    [backAction]="goBack.bind(this)"
    [showBurgerMenu]="true"
    [burgerMenuTitle]="'Navigation'"
    [burgerMenuItems]="burgerMenuItems"
    [rightActions]="rightActions">
  </app-header>

  <ion-content>
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          Cliché Analyzer
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="actions">
          <ion-button color="primary" (click)="analyze()">
            <ion-icon slot="start" name="search"></ion-icon>
            Analyze Story
          </ion-button>
          <ion-badge color="medium" *ngIf="findings.length > 0">{{ findings.length }} hits</ion-badge>
        </div>

        <div class="results" *ngIf="findings.length > 0; else noResults">
          <ion-list>
            <ion-item *ngFor="let f of findings">
              <ion-badge color="warning" slot="start">Cliché</ion-badge>
              <ion-label>
                <div class="snippet">{{ f.phrase }}</div>
                <div class="meta">Scene: {{ f.sceneLabel }}</div>
              </ion-label>
            </ion-item>
          </ion-list>
        </div>
        <ng-template #noResults>
          <div class="meta">No clichés detected yet. Click Analyze to run a check.</div>
        </ng-template>
      </ion-card-content>
    </ion-card>
  </ion-content>
</div>
